<h2 id="python-requests-library">Python Requests Library</h2>

<p>Sometimes we need with a script written in Python accessing to an API or download the content of a web page.</p>

<p>For that we can use the <a href="https://docs.python-requests.org/en/latest">Requests Library</a></p>

<p>First we need to install the library:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="go">pip install requests
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>Code Example :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># The requests module provides us different methods (get, post, update, delete)
</span><span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://www.google.com'</span><span class="p">)</span>

<span class="c1"># In the request method also it is possible to specify the headers, the cookies and the data sent
</span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span> <span class="s">'accept'</span> <span class="p">:</span> <span class="s">'*/*'</span> <span class="p">}</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span> <span class="s">'title'</span> <span class="p">:</span> <span class="s">'Download web page with python'</span> <span class="p">}</span>
<span class="n">cookies</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">example_cookie</span><span class="o">=</span><span class="s">'value'</span><span class="p">)</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://reqres.in/api/posts'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">cookies</span><span class="o">=</span><span class="n">cookies</span><span class="p">)</span>

<span class="c1"># With the object returned 
# We could check the status code of the response
</span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span>

<span class="c1"># We could obtain the content of the page as a string
</span><span class="n">r</span><span class="o">.</span><span class="n">text</span>

<span class="c1"># Or if the url is an API, we could obtain the response in json format
</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>


</pre></td></tr></tbody></table></code></pre></div></div>
