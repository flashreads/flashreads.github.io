<h1 id="properly-delete-an-element-from-a-slice-in-go">Properly delete an element from a slice in Go</h1>

<p>Arrays and slices in Go are a bit different from analogous structrures in other languages (like <code class="highlighter-rouge">list</code> in Python).
An arrays is contigious container that holds the values, while the slice just holds pointers to the start and the end
of a region of the container that we’re concerned about. Learn more about <a href="https://blog.golang.org/slices-intro">slices and arrays in Go here</a>.</p>

<p>This makes deleting a value from a slice a bit tricky.</p>

<p>There are two ways this can be achieved, depending on whether we want to keep the order of values in the array or not.</p>

<p>If we want to keep the order of the values, we can slice the array up to the element we want to remove, then append all
elements after the that:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="x">
</span><span class="n">arr</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"a"</span><span class="p">,</span><span class="x"> </span><span class="s">"b"</span><span class="p">,</span><span class="x"> </span><span class="s">"c"</span><span class="p">,</span><span class="x"> </span><span class="s">"d"</span><span class="p">,</span><span class="x"> </span><span class="s">"e"</span><span class="p">,</span><span class="x"> </span><span class="s">"f"</span><span class="p">}</span><span class="x">

</span><span class="c">// we want to remove the thrid element "c"</span><span class="x">
</span><span class="n">i</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">2</span><span class="x">
</span><span class="n">arr</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="nb">append</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="o">:</span><span class="n">i</span><span class="p">],</span><span class="x"> </span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="m">1</span><span class="o">:</span><span class="p">]</span><span class="o">...</span><span class="p">)</span><span class="x">

</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="x">
</span><span class="c">// [a b d e f]</span><span class="x">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>Note that we used the expansion expression <code class="highlighter-rouge">...</code> and we’re adding the elements from the slice.</p>

<p>This gets the job done, but is not very efficient. However the order of the elements will be preserved.</p>

<p>If we don’t care about the order of elements, we can swap the element we want to remove with the last element of the slice,
then make the slice to be one element shorter:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="x">
</span><span class="n">arr</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"a"</span><span class="p">,</span><span class="x"> </span><span class="s">"b"</span><span class="p">,</span><span class="x"> </span><span class="s">"c"</span><span class="p">,</span><span class="x"> </span><span class="s">"d"</span><span class="p">,</span><span class="x"> </span><span class="s">"e"</span><span class="p">,</span><span class="x"> </span><span class="s">"f"</span><span class="p">}</span><span class="x">

</span><span class="c">// we want to remove the thrid element "c"</span><span class="x">
</span><span class="n">i</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="m">2</span><span class="x">
</span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">arr</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="x"> </span><span class="o">-</span><span class="x"> </span><span class="m">1</span><span class="p">]</span><span class="x">
</span><span class="n">arr</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">arr</span><span class="p">[</span><span class="o">:</span><span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="x"> </span><span class="o">-</span><span class="x"> </span><span class="m">1</span><span class="p">]</span><span class="x">

</span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span><span class="x">
</span><span class="c">// [a b f d e]</span><span class="x">
</span><span class="c">// "c" is not in the slice, but the order is not preserved</span><span class="x">

</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>This approach is <em>much</em> faster than the previous approach, but does not preserve the order of elements.</p>

<p>What is happening behind the scene: remember that in Go, arrays are the container holding the values, and the slice is just
a structure that points to the start and the end of the part of the array we’re concerned about? In the second case what we
did was the following:</p>

<p>We started with something like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre>   
array: ["a"]["b"]["c"]["d"]["e"]["f"]
       ↑                          ↑
       |  ┌-----------------------┘
slice (0, 5)  start at 0 and end at 5
</pre></td></tr></tbody></table></code></pre></div></div>

<p>the slice starts at the 0th element and ends at the 5th element. The array is the background container holding the values.</p>

<p>After we swap out “c” with “f”, we then set the slice end at 4 and end up with something likie this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>                   ┌---- swap ----┐
                   ↓              ↓
array: ["a"]["b"]["f"]["d"]["e"]["c"]
       ↑                     ↑
       |  ┌------------------┘
slice (0, 4)  start at 0 and end at 4

</pre></td></tr></tbody></table></code></pre></div></div>
<p>Now the slice ends at the 4th element. Note that the array still holds 6 values, however our slice only “sees” 5.</p>
