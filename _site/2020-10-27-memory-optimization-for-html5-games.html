<h2 id="intro">Intro:</h2>
<p>Most of the games contains game logic where you need to instantiate a lot of objects from some class like particles that have short lifetime and needs to be destroyed.</p>

<h2 id="problem">Problem:</h2>
<p>JavaScript’s model is based on garbage collection pattern. This means that the developer don’t have dirrect control over allocated memory. Memory locations (variables) marked as <code class="highlighter-rouge">null</code> will be collected by garbage collector and removed from memory. But when garbage collector needs to dispose a lot of objects, takes a lot of processing time. Neceserry spent processing time is bad for the performance of the game.</p>

<p>In most cases the memory profile will be like this:</p>

<p><img src="https://user-images.githubusercontent.com/10467454/97344828-91c31700-1889-11eb-9afb-f5fe9c4fcb6d.jpg" alt="fig2" /></p>

<h2 id="how-to-fix-that">How to fix that</h2>

<p>Solution for this kind of problem is implementing <a href="https://en.wikipedia.org/wiki/Object_pool_pattern"><strong>Object pools pattern</strong></a>. This implementation will help with reusing disposed objects instead of creating new ones.</p>

<p>After optimization:</p>

<p><img src="https://user-images.githubusercontent.com/10467454/97344857-9be51580-1889-11eb-9b09-b767b129fd18.jpg" alt="fig3" /></p>

<h2 id="example">Example</h2>

<ol>
  <li>
    <p>Import <a href="https://www.npmjs.com/package/object-pool">object-pool</a> npm module by executing <code class="highlighter-rouge">npm install --save object-pool</code></p>
  </li>
  <li>
    <p>Replace old implementation
```javascript
class GameObject {</p>

    <p>speed = 1</p>

    <p>run() { /* your code */ }
}</p>
  </li>
</ol>

<p>let gameObject = new GameObject()
gameObject.run()</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td><td class="rouge-code"><pre>
with:

```javascript

import pool from 'object-pool'

class GameObject {
    
    speed = 1

    run() { /* your code */ }
}

const gameObjectPool = pool({
    init: () =&gt; { // a factory method which should return a freshly created object.
        return new GameObject()
    },
    initSize: 10, // a number to specify the initial size of reserved objects in the pool
    
    disable: gameObject =&gt; {
        // reset gameObject properties to default values
        gameObject.speed = 1
    }
})

let gameObject = gameObjectPool.create()
gameObject.run()

</pre></td></tr></tbody></table></code></pre></div></div>

<p>For more detailed documentation for the library visit <a href="https://www.npmjs.com/package/object-pool">the link</a>.</p>
